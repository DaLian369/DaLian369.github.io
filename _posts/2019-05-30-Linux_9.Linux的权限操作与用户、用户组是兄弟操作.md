---
title: Linux_9.Linux的权限操作与用户、用户组是兄弟操作
layout: post
categories: Linux
tags: Linux_9.Linux的权限操作与用户、用户组是兄弟操作
---
## 九、Linux的权限操作与用户、用户组是兄弟操作

### 1.权限概述

总述：Linux系统一般将可存/取访问的身份分为3个类别：woner、group、others，且3种身份各有read、write、exxecute等权限

**1.权限介绍**

- 什么是权限？

>在多用户（可以不同时）计算机系统的管理中，权限是指某个特定的用户具有特定的系统资源使用去哪里，像是文件夹、特定系统指令的使用或存储量的限制

```
* 在Linux中分别有读、写、执行权限：
读权限：
	对于文件夹来说，读权限影响用户是否能够列出目录结构
	对于文件来说，读权限影响用户是否可以查看文件内容
写权限：
	对于文件夹来说，写权限影响用户是否可以在文件夹中创建/删除/移动到文档
	对于文件来说，写权限影响用户是否可以编辑文件
执行权限：
	一般都是对于文件来说，特别脚本文件
```

**2.身份介绍**

	* Owner身份（文件所有者，默认为文档的创建者）
	
		Linux是多用户、多任务的操作系统，因此常常有多人同时在某台主机上工作，但每个人均可在主机上设置文件的权限，让其成为个人的“私密文件”。
		
	* Group身份（与文件所有者同组的用户）
	
		多个团队在同一台主机开发资源的时候。
		
	* Others身份（其他人，相对于所有者）
	
	* Root用户（超级用户）
	
		拥有最大的权限，管理着普通用户。
		
3.Linux的权限介绍

显示文件的文件名和相关属性：#ls -l 路径	【ls -l 等价于ll】

	最左边就是Linux的文档权限属性信息：
	
		r：read，可读
		
		w：write，可写
		
		e：execute，可执行
		
		-：没有对应权限
		
	十位字符表示含义：
	
		第1位：表示文档类型，取值常见的有“d文件夹”，“-文件”，“|软连接”，“s套接字”等
		
		第2-4位：表示文档所有者的权限情况
		
		第5-7位：表示与所有者同在一个组的用户的权限情况。
		
		第8-10位：表示出了上面的前2部分的用户之外的其他用户的权限情况。

### 2.权限设置

​	语法：#chmod 选项 权限模式 文档

​	注意事项：

​		常用选项：

​			-R：递归设置权限（当文档类型为文件夹的时候）可无

​		权限模式：就是该文档需要设置的权限信息

​		文档：可以是文件，也可以是文件夹，可以是相对路径也可以是绝对路径

​	注意点：如果想要给文档设置权限，操作者要么是root用户，要么就是文档的所有者。

**1.字母形式**

```
选项	字母	介绍

给谁设置：
	u：表示所有者身份 owner（user）
	g：表示给所有者同组用户设置 （group）
	o：表示others，给其他用户设置权限
	a：表示all，给所有人（包含ugo部分）设置权限
	如果在设置权限的时候不指定给谁设置，则默认给所有用户设置
权限字符：
	r：读	w：写	x：表示执行	-：表示没有权限
权限分配方式：
	+：表示给具体的用户增加权限（相对当前）
	-：表示删除用户的权限（相对当前）
	=：表示将权限设置成具体的值（注重结果）
例如：要求所有者拥有全部的权限，同组用户拥有读和执行权限，其他用户只读权限
	①#chmod u+x,g+rx,o+r 文件名
	②#chmod u=rwx,g=rx,o=r 文件名
提示：当文档拥有执行权限，则其颜色在终端是绿色
```

**2.数字形式**

	经常会在一些技术性的网页上看到类似于#chmod 777 a.txt  这样的一个权限，这种形式称之为数字形式权限（777）。
	
	读：r	4 	写：w	2	执行：x	1	没有任何权限：0
	
	需要设置哪些权限，将他们的数字加起来即可
	
	#chmod 754 文件名
	

>在Linux中，如果要删除一个文件，不是看文件有没有对应的权限，而是看文件所在的目录是否有写权限，如果有才可以删除。

### 3.属主与属组设置

属主：所属的用户（文件的主人）

属组：所属的用户组

这两项信息在文档创建的时候会使用创建者的信息（用户名、用户所属的主组名称）。

如果有时候去删除某个用户，则该用户对应的文档的属主和属组信息就需要去修改。

**1.chown（重点）**

	作用：更改文档的所属用户
	
	用户：#chown -R username 文档路径
	
**2.chgrp（了解）**

	作用：更改文档的所属用户组
	
	语法：#chgrp -R groupname 文档的路径
	
思考：如何通过一个命令实现既可以更改所属的用户，也可以修改所属的用户组呢？

>答：可以实现的，通过chown命令

	>语法：\#chown -R username:groupname 文档路径

### 4.扩展

问题：reboot、shutdown、init、halt、user管理，在普通用户身份上都是操作不了，但是有些特殊的情况下又需要有执行权限。又不可能让root用户把自己的密码告诉普通用户，这个问题该怎么解决？

>答：该问题是可以被结局的，可以使用sudo（switch user do）命令来进行权限设置。sudo可以让管理员（root）事先定义某些特殊命令谁可以执行。

默认sudo中是没有除root之外用户的规则，要想使用则先配置sudo。

Sudo配置文件：/etc/sudoers

	a.配置sudo文件请使用“#visodo”，打开之后其使用方法和vim一致
	
	b.配置普通用户的权限
	
		Root：用户名，如果是用户组，则可以写成“%组名”
		
		ALL：允许登陆的主机（地址白名单）
		
		(ALL)：表示以谁的身份执行，ALL表示root身份
		
		ALL：表示当前用户可以执行的命令，多个命令可以使用“,”分割
		
案例：本身dalian用户不能添加用户，要求使用sudo配置，将其设置为可以添加用户，并且可以修改密码（但是不能修改root用户密码）

		dalian   ALL(ALL)  /usr/sbin/useradd,/usr/bin/passwd	
		
注意：在写sudo规则的时候不建议写直接形式的命令，而是写命令的完整路径

	路径可以使用which命令来查看
	
	语法：#which 指令名称
	
	再添加好对应的规则之后就可以切换用户，切换到普通用户dalian，再去执行：
	
		此时要想使用刚才的指令，则以以下命令进行：#sudo 需要执行的命令
		
	特别注意：此处按照案例要求，不能让dalian
	
补充：在普通用户下怎么查看自己具有哪些特殊权限呢？

	#sudo -l

最后：sudo不是任何Linux分支都有的命令，常见centos与ubuntu都存在sudo命令。