---
title: Linux_6.用户与用户组管理（重点）
layout: post
categories: Linux
tags: Linux_6.用户与用户组管理（重点）
---
## 六、用户与用户组管理（重点）

**注意三个文件：**

| 文件        | 作用                 |
| :---------- | -------------------- |
| /etc/passwd | 存储用户的关键信息   |
| /etc/group  | 存储用户组的关键信息 |
| /etc/shadow | 存储用户的密码信息   |

### 1.用户管理

/etc/passwd
**① 添加用户**
常用语法：#useradd  选项  用户名
常用选项：

> -g ：表示指定用户的用户主组，选项的值可以使用户组的id，也可以是组名
> -G ：表示指定用户的用户附加组，选项的值可以使用户组的id，也可以是组名
> -u ：uid，用户的id（用户的标识符），系统默认会从500之后按顺序分配uid，如果不想使用系统分配的，可以通过该选项自定义
> -c ：添加注释
> 可以在上面文件验证用户是否添加成功
> 扩展：认识passwd文件

```
> 用户名:密码:用户ID:用户组ID:注释:家目录:解释器shell
> 解释器shell：等待用户进入系统之后，用户输入指令之后，该解释器会收集用户输入的指令，传递给内核处理；
```

注意：在不添加选项的时候，执行useradd之后会执行一系列的操作
	> 创建同名的家目录；
	> 创建同名的用户组；

案例：#useradd -g 501 -G 500 -u 666 lisi 
注意：查看用户的主组可以查看passwd文件，查看附加组可以查看group文件

**② 修改用户**
常用语法：#usermod  选项  用户名
Usermod：user modify，用户修改
常用选项：

> -g ：表示指定用户的用户主组，选项的值可以使用户组的id，也可以是组名
> -G ：表示指定用户的用户附加组，选项的值可以使用户组的id，也可以是组名
> -u ：uid，用户的id（用户的标识符），系统默认会从500之后按顺序分配uid，如果不想使用系统分配的，可以通过该选项自定义
> -l  ：修改用户名	#usermod -l 新的用户名 旧的用户名

**③ 设置密码**
	Linux不允许没有密码的用户登录到系统，因此前面创建的用户目前都出去锁定状态，需要设置密码之后才能登录计算机。
	常用语法：#passwd 用户名

​	切换用户命令：#su[用户名]	(switch user)
​	如果用户名不指定则表示切换到root用户

**④ 删除用户**
	常用语法：#userdel 选项 用户名
	Userdel：user delete（用户删除）
	常用选项：
		-r ：表示删除用户的同时，删除其家目录；

​	注意：已经登录的用户删除的时候会提示删除失败
​	解决办法：简单粗暴，kill对应用户的全部进程   kill  pid
提示：所有跟用户操作的命令（除passwd外）只有root超级管理员有权限执行。

### 2.用户组管理

/etc/group
文件结构：	用户组名:密码:ID:组内用户

**① 用户转租添加**
	常用语法：#groupadd 选项 用户组名
	常用选项：
		-g ：类似用户添加里的“-u”，-g表示选择自己设置一个自定义的用户组ID数字，如果不指定，则默认从500之后递增；

**② 用户组编辑**
	常用语法：#groupmod 选项 用户组名
	常用选项：
		-g ：类似用户添加里的“-u”，-g表示选择自己设置一个自定义的用户组ID数字
		-n ：类似于用户修改“-l”，表示设置新的用户租的名称

**③ 用户组删除**
	常用语法：#groupdel 用户组名
	注意：当如果需要删除一个组，但是这个组是某个用户的主组时，则不允许删除；如果确实需要删除，则先从组内移除所有用户。

### 3.网络设置

首先知道网卡配置文件位置：/etc/sysconfig/network-scripts
在目录中网卡的配置文件命名格式：ifcfg-网卡名称
ONBOOT：是否开机启动
BOOTPROTO：ip地址分配方式，DHCP表示动态主机分配协议
HWADDR：硬件地址，MAC地址

如果后续需要重启网卡怎么去操作呢？
	#service network restart
在有的分支版本中可能没有service命令来快速操作服务，但是有一个共性的目录：/etc/init.d，这个目录中放着很多对服务的快捷方式。
#/etc/init.d/network restart

**扩展1：**如果修改网卡的配置文件，但是配置文件的目录层次很深，此时可以在前的目录找那个创建一个快捷方式（软连接），方便以后去查找
	#ln -s 原始文件的路径  快捷方式的路径
	* 通过ls -l 可以列出快捷方式对应的原文件路径
	* 首字“l”表示其类型为link（连接类型），后面的“->”指向的是原始文件路径

```
扩展2：如何去重启单个网卡？
停止某个网卡：#ifdown 网卡名
开启某个网卡：#ifup 网卡名

提示：在实际工作的时候不要随意网卡
```